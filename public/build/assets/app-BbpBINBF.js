import{a as h,m as r,C as v,i as f,b as y}from"./index-BvXCc8R3.js";window.axios=h;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var E={code:"fa",week:{dow:6,doy:12},direction:"rtl",buttonText:{prev:"قبلی",next:"بعدی",today:"امروز",year:"سال",month:"ماه",week:"هفته",day:"روز",list:"برنامه"},weekText:"هف",allDayText:"تمام روز",moreLinkText(s){return"بیش از "+s},noEventsText:"هیچ رویدادی به نمایش"};r.loadPersian({usePersianDigits:!0});document.addEventListener("DOMContentLoaded",function(){const s=document.getElementById("calendar");s&&new v(s,{plugins:[f,y],initialView:"dayGridMonth",editable:!0,selectable:!0,locale:E.code,events:{url:"/admin/api/calendar-events",failure:function(){alert("Failed to load events. Please try again.")}},eventContent:function(e){const t=r(e.event.start).format("jYYYY/jMM/jDD"),n=e.event.end?r(e.event.end).format("jYYYY/jMM/jDD"):null;return{html:`
                        <div>
                            <strong>${e.event.title}</strong><br/>
                            ${t}${n?" - "+n:""}
                        </div>
                    `}},datesSet:function(e){const t=r(e.start).format("jYYYY/jMM/jDD"),n=r(e.end).format("jYYYY/jMM/jDD");console.log(`Displayed Range: ${t} - ${n}`)},eventClick:function(e){const t=e.event.extendedProps.qr_code_url;t?window.open(t,"_blank"):alert(`Event: ${e.event.title}`)},eventDrop:function(e){h.post("/admin/api/calendar-events/update",{id:e.event.id,start:e.event.start.toISOString(),end:e.event.end?e.event.end.toISOString():null}).then(t=>{alert("Event updated successfully.")}).catch(t=>{var n,a;alert("Error updating event: "+((a=(n=t.response)==null?void 0:n.data)==null?void 0:a.message)||t.message),e.revert()})}}).render()});document.addEventListener("DOMContentLoaded",()=>{const s=document.getElementById("theme-toggle"),o=document.getElementById("theme-toggle-dark-icon"),e=document.getElementById("theme-toggle-light-icon"),t=document.getElementById("theme-toggle-desktop"),n=document.getElementById("theme-toggle-mobile"),a=document.getElementById("theme-toggle-icon-desktop"),i=document.getElementById("theme-toggle-icon-mobile"),m=d=>{o&&e&&(d?(o.classList.add("hidden"),e.classList.remove("hidden")):(e.classList.add("hidden"),o.classList.remove("hidden"))),a&&(a.className=`fas ${d?"fa-sun":"fa-moon"} text-lg`),i&&(i.className=`fas ${d?"fa-sun":"fa-moon"} text-lg`)},u=localStorage.getItem("theme"),p=window.matchMedia("(prefers-color-scheme: dark)").matches,g=u==="dark"||!u&&p;g?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),m(g);const c=()=>{const d=document.documentElement.classList.toggle("dark");localStorage.setItem("theme",d?"dark":"light"),m(d)};s&&s.addEventListener("click",c),t&&t.addEventListener("click",c),n&&n.addEventListener("click",c)});const L=document.getElementById("searchInput"),l=document.getElementById("autocompleteResults");L.addEventListener("input",async function(){const s=this.value.trim();if(s.length>0)try{const e=await(await fetch(`/admin/users?search=${s}`,{headers:{"X-Requested-With":"XMLHttpRequest"}})).json();if(l.innerHTML="",l.classList.remove("hidden"),e.results.length>0){e.results.forEach(n=>{const a=document.createElement("li");a.classList.add("px-4","py-2","hover:bg-gray-100","dark:hover:bg-gray-700","cursor-pointer"),a.innerHTML=`<a href="/admin/users/${n.id}/edit/">${n.name} - ${n.email}</a>`,l.appendChild(a)});const t=document.createElement("li");t.classList.add("px-4","py-2","hover:bg-gray-100","dark:hover:bg-gray-700","cursor-pointer"),t.innerHTML=`<a href="/admin/users?search=${s}">${seeMoreText}</a>`,l.appendChild(t)}else{const t=document.createElement("li");t.classList.add("px-4","py-2","text-gray-500","dark:text-gray-400"),t.innerText=noResultsText,l.appendChild(t)}}catch(o){console.error("Error fetching autocomplete results:",o)}else l.classList.add("hidden")});
